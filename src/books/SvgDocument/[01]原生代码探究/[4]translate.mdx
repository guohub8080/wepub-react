export const title = "SVG translate 变换"
export const icon = "Move"

# {title}

`translate` 是 SVG 中最简单也是最常用的变换,用于在 X 和 Y 方向上平移元素。

## 基本语法

```xml
<element transform="translate(tx ty)" />
```

| 参数 | 说明 | 示例 |
|-----|------|------|
| `tx` | X 方向平移距离(必需) | `translate(100)` |
| `ty` | Y 方向平移距离(可选,默认 0) | `translate(100 50)` |

### 单参数形式

只指定 X 方向平移:

```xml
<svg viewBox="0 0 200 200" width="200" height="200">
  <!-- 原始位置 -->
  <rect x="10" y="10" width="50" height="50" fill="lightblue" />

  <!-- 向右平移 100px -->
  <rect x="10" y="10" width="50" height="50" fill="blue" transform="translate(100)" />
</svg>
```

### 双参数形式

同时指定 X 和 Y 方向平移:

```xml
<svg viewBox="0 0 200 200" width="200" height="200">
  <!-- 原始位置 -->
  <rect x="10" y="10" width="50" height="50" fill="lightblue" />

  <!-- 向右平移 100px,向下平移 80px -->
  <rect x="10" y="10" width="50" height="50" fill="blue" transform="translate(100 80)" />
</svg>
```

## 负值平移

使用负值可以向相反方向移动:

```xml
<svg viewBox="0 0 200 200" width="200" height="200">
  <!-- 原始位置(在右侧) -->
  <rect x="150" y="50" width="50" height="50" fill="lightblue" />

  <!-- 向左平移 100px -->
  <rect x="150" y="50" width="50" height="50" fill="blue" transform="translate(-100)" />

  <!-- 向左平移 100px,向上平移 30px -->
  <rect x="150" y="50" width="50" height="50" fill="darkblue" transform="translate(-100 -30)" />
</svg>
```

## 平移坐标系

`translate` 变换的是整个坐标系,影响元素及其子元素:

```xml
<svg viewBox="0 0 300 200" width="300" height="200">
  <!-- 第一组:原始位置 -->
  <g>
    <rect x="10" y="10" width="40" height="40" fill="blue" />
    <circle cx="30" cy="30" r="10" fill="yellow" />
  </g>

  <!-- 第二组:整体平移 -->
  <g transform="translate(150 50)">
    <rect x="10" y="10" width="40" height="40" fill="green" />
    <circle cx="30" cy="30" r="10" fill="yellow" />
  </g>
</svg>
```

## 实际应用场景

### 场景 1: 创建重复图案

使用 translate 创建规律的图案:

```xml
<svg viewBox="0 0 200 200" width="200" height="200">
  <!-- 第一行 -->
  <circle cx="30" cy="30" r="20" fill="blue" />
  <circle cx="30" cy="30" r="20" fill="blue" transform="translate(50 0)" />
  <circle cx="30" cy="30" r="20" fill="blue" transform="translate(100 0)" />
  <circle cx="30" cy="30" r="20" fill="blue" transform="translate(150 0)" />

  <!-- 第二行 -->
  <circle cx="30" cy="30" r="20" fill="red" transform="translate(0 50)" />
  <circle cx="30" cy="30" r="20" fill="red" transform="translate(50 50)" />
  <circle cx="30" cy="30" r="20" fill="red" transform="translate(100 50)" />
  <circle cx="30" cy="30" r="20" fill="red" transform="translate(150 50)" />
</svg>
```

### 场景 2: 对称布局

使用 translate 创建对称图形:

```xml
<svg viewBox="0 0 200 200" width="200" height="200">
  <!-- 中心 -->
  <circle cx="100" cy="100" r="20" fill="blue" />

  <!-- 四个角的圆(相对中心对称) -->
  <circle cx="100" cy="100" r="15" fill="lightblue" transform="translate(-60 -60)" />
  <circle cx="100" cy="100" r="15" fill="lightblue" transform="translate(60 -60)" />
  <circle cx="100" cy="100" r="15" fill="lightblue" transform="translate(-60 60)" />
  <circle cx="100" cy="100" r="15" fill="lightblue" transform="translate(60 60)" />
</svg>
```

### 场景 3: 滑动元素定位

使用负 translate 实现居中效果:

```xml
<svg viewBox="0 0 200 200" width="200" height="200">
  <!-- 背景框 -->
  <rect x="50" y="50" width="100" height="100" fill="none" stroke="gray" stroke-width="2" />

  <!-- 使用 translate 实现绝对居中 -->
  <rect x="0" y="0" width="80" height="40" fill="blue" transform="translate(100 100)" />
  <!-- 因为矩形左上角在 (0,0),translate(100 100) 后中心在 (140, 120) -->

  <!-- 正确的居中方法:translate(-50% -50%) 的等价写法 -->
  <rect x="0" y="0" width="80" height="40" fill="red" transform="translate(60 80)" />
  <!-- 100 - 80/2 = 60, 100 - 40/2 = 80 -->
</svg>
```

## 动画中的应用

translate 是位移动画的基础:

### 基础位移动画

```xml
<svg viewBox="0 0 200 100" width="200" height="100">
  <rect x="20" y="40" width="40" height="20" fill="blue">
    <animateTransform
      attributeName="transform"
      type="translate"
      from="0 0"
      to="140 0"
      dur="2s"
      repeatCount="indefinite"
    />
  </rect>
</svg>
```

### 往返运动

```xml
<svg viewBox="0 0 200 100" width="200" height="100">
  <rect x="20" y="40" width="40" height="20" fill="blue">
    <animateTransform
      attributeName="transform"
      type="translate"
      values="0 0; 140 0; 0 0"
      dur="3s"
      repeatCount="indefinite"
    />
  </rect>
</svg>
```

### 复合路径运动

```xml
<svg viewBox="0 0 200 200" width="200" height="200">
  <circle cx="0" cy="0" r="20" fill="blue">
    <!-- 先向右移动 -->
    <animateTransform
      attributeName="transform"
      type="translate"
      values="20 20; 180 20; 180 180; 20 180; 20 20"
      dur="4s"
      repeatCount="indefinite"
    />
  </circle>
</svg>
```

## 注意事项

### 1. 变换顺序

当有多个变换时,顺序很重要:

```xml
<!-- 先平移后旋转 -->
<rect transform="translate(100 50) rotate(45)" />

<!-- 先旋转后平移(效果不同) -->
<rect transform="rotate(45) translate(100 50)" />
```

### 2. 坐标系影响

translate 改变的是元素的坐标系,影响后续的绘制:

```xml
<svg viewBox="0 0 200 200" width="200" height="200">
  <g transform="translate(50 50)">
    <!-- 这里的 (10, 10) 实际在画布的 (60, 60) -->
    <rect x="10" y="10" width="30" height="30" fill="blue" />

    <!-- 子元素也受影响 -->
    <circle cx="25" cy="25" r="10" fill="yellow" />
  </g>
</svg>
```

### 3. 微信公众号兼容性

translate 在微信公众号中完全支持,可以放心使用。

## 最佳实践

1. **使用分组**: 多个元素需要相同平移时,使用 `<g transform="translate()">` 包裹
2. **单位省略**: translate 的参数不需要单位(默认为像素)
3. **动画优化**: 位移动画使用 `animateTransform` 而非 `animate`
4. **居中计算**: 使用 `translate(x - width/2 y - height/2)` 实现元素居中

```xml
<!-- 推荐的居中写法 -->
<rect width="80" height="40" transform="translate(100 20)" />
<!-- 或者在定义时就指定中心位置 -->
```
