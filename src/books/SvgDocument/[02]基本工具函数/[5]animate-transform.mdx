export const title = "动画变换函数"
export const icon = "Sparkles"

# {title}

`genSvgAnimateTransform` 是一组用于生成 SVG SMIL 动画的高级函数集合，简化了 SVG 动画的创建过程。

## 概述

这组函数提供了声明式的方式来配置 SVG 动画，无需手动编写复杂的 `<animateTransform>` 标签和计算动画参数。

### 支持的动画类型

| 函数名 | 动画类型 | 说明 |
|--------|----------|------|
| `genAnimateTranslate` | 平移 | 移动元素位置 (X, Y) |
| `genAnimateScale` | 缩放 | 改变元素大小 |
| `genAnimateRotate` | 旋转 | 旋转元素角度 |
| `genAnimateOpacity` | 透明度 | 改变元素透明度 |
| `genAnimateSkewX` | 水平斜切 | X 轴方向的斜切变换 |
| `genAnimateSkewY` | 垂直斜切 | Y 轴方向的斜切变换 |
| `genAnimatePathStroke` | 路径描边 | 路径描边动画效果 |

## 核心特性

### 1. 时间线驱动

使用时间线数组配置多段动画，每段动画独立配置持续时间和目标值：

```js
{
  timeline: [
    { durationSeconds: 1, toValue: 100, keySplines: "0.42 0 0.58 1" },
    { durationSeconds: 1, toValue: 0, keySplines: "0.42 0 0.58 1" }
  ]
}
```

### 2. 相对/绝对模式

支持增量和累积两种模式：

- **增量模式** (`isRelativeMove: true`): 每段的值相对于上一段
- **累积模式** (`isRelativeMove: false`): 每段的值是绝对目标值

### 3. 缓动函数集成

内置 6 种缓动函数：

- `getLinearBezier()` - 线性匀速
- `getEaseBezier()` - 基础缓动
- `getPowerBezier()` - 强力缓动（可调强度）
- `getCircleBezier()` - 圆形缓动
- `getExpoBezier()` - 指数缓动
- `getSineBezier()` - 正弦缓动

### 4. 循环控制

- `loopCount: 0` - 无限循环
- `loopCount: n` - 循环 n 次
- `freeze: true` - 保持最终状态

## 使用示例

### 平移动画

```js
import { genAnimateTranslate } from "@svg-anim/translate"
import { getEaseBezier } from "@pub-utils/getBezier"

<image href="sprite.png" width="30" height="30">
  {genAnimateTranslate({
    initValue: { x: 0, y: 0 },
    timeline: [
      {
        durationSeconds: 2,
        toValue: { x: 345, y: 0 },
        keySplines: getEaseBezier({ isIn: true, isOut: true })
      },
      {
        durationSeconds: 2,
        toValue: { x: 0, y: 0 },
        keySplines: getEaseBezier({ isIn: true, isOut: true })
      }
    ],
    loopCount: 0
  })}
</image>
```

### 缩放动画

```js
import { genAnimateScale } from "@svg-anim/scale"
import { getPowerBezier } from "@pub-utils/getBezier"

<g>
  {genAnimateScale({
    initScale: 1,
    timeline: [
      { durationSeconds: 0.5, toValue: 1.5, keySplines: getPowerBezier({ power: 2, isIn: false, isOut: true }) },
      { durationSeconds: 0.5, toValue: 1, keySplines: getPowerBezier({ power: 2, isIn: false, isOut: true }) }
    ],
    loopCount: 0,
    origin: 'center'
  })}
  <image href="sprite.png" width="30" height="30" x="-15" y="-15" />
</g>
```

### 透明度动画

```js
import { genAnimateOpacity } from "@svg-anim/opacity"
import { getEaseBezier } from "@pub-utils/getBezier"

<g>
  {genAnimateOpacity({
    initOpacity: 0,
    timeline: [
      { durationSeconds: 1, toValue: 1, keySplines: getEaseBezier({ isIn: false, isOut: true }) },
      { durationSeconds: 2, toValue: 1 },
      { durationSeconds: 1, toValue: 0, keySplines: getEaseBezier({ isIn: true, isOut: false }) }
    ],
    loopCount: 0
  })}
  <image href="sprite.png" width="30" height="30" />
</g>
```

## 通用参数

所有动画函数都支持以下通用参数：

| 参数 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `delay` | `number` | `0` | 初始延迟（秒） |
| `additive` | `boolean` | `true` | 是否累加变换 |
| `isBeginWithClick` | `boolean` | `false` | 是否点击触发 |
| `freeze` | `boolean` | `false` | 是否保持最终状态 |
| `loopCount` | `number` | `1` | 循环次数（0 = 无限） |

## 路径别名

使用路径别名简化导入：

```js
// 完整路径
import { genAnimateTranslate } from "@svg-anim/translate"

// 使用别名
import { genAnimateTranslate } from "@svg-anim/translate"
```

## 相关文档

- [KeySplines 缓动函数](./[1]keysplines.mdx) - 详解缓动函数
- [动画参数说明](./[4]animate-params.mdx) - 参数详细说明
- [元素边界](./[2]element-bounds.mdx) - 元素定位
