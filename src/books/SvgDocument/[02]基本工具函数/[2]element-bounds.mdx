export const title = "å…ƒç´ è¾¹ç•ŒElementBounds"
export const icon = "BookOpen"

# {title}

`elementBounds` ç”¨äºæè¿° SVG å…ƒç´ çš„ä½ç½®å’Œå°ºå¯¸ï¼Œé…åˆ `getOriginNumByText` å‡½æ•°è‡ªåŠ¨è®¡ç®—å˜æ¢åŸç‚¹åæ ‡ã€‚

## ä»€ä¹ˆæ˜¯ ElementBoundsï¼Ÿ

`ElementBoundsType` æ˜¯ä¸€ä¸ªæè¿°å…ƒç´ è¾¹ç•Œçš„ç±»å‹ï¼ŒåŒ…å«ä»¥ä¸‹å±æ€§ï¼š

- `x?`: å…ƒç´ å·¦ä¸Šè§’ X åæ ‡ï¼ˆå¯é€‰ï¼Œé»˜è®¤ 0ï¼‰
- `y?`: å…ƒç´ å·¦ä¸Šè§’ Y åæ ‡ï¼ˆå¯é€‰ï¼Œé»˜è®¤ 0ï¼‰
- `w`: å…ƒç´ å®½åº¦ï¼ˆå¿…å¡«ï¼‰
- `h`: å…ƒç´ é«˜åº¦ï¼ˆå¿…å¡«ï¼‰

```typescript
type ElementBoundsType = {
  x?: number;  // å·¦ä¸Šè§’ X åæ ‡ï¼Œé»˜è®¤ 0
  y?: number;  // å·¦ä¸Šè§’ Y åæ ‡ï¼Œé»˜è®¤ 0
  w: number;   // å®½åº¦ï¼ˆå¿…å¡«ï¼‰
  h: number;   // é«˜åº¦ï¼ˆå¿…å¡«ï¼‰
}
```

## ä¸ºä»€ä¹ˆéœ€è¦ ElementBoundsï¼Ÿ

SVG çš„æ—‹è½¬ã€ç¼©æ”¾ç­‰å˜æ¢é»˜è®¤ä»¥åæ ‡åŸç‚¹ `(0, 0)` ä¸ºä¸­å¿ƒã€‚ä½†é€šå¸¸æˆ‘ä»¬å¸Œæœ›ï¼š

- âœ… **ä»¥å…ƒç´ è‡ªèº«çš„ä¸­å¿ƒ**ä¸ºå˜æ¢åŸç‚¹
- âœ… **ä»¥å…ƒç´ çš„æŸä¸ªè§’è½æˆ–è¾¹ç¼˜**ä¸ºå˜æ¢åŸç‚¹

`elementBounds` æä¾›å…ƒç´ çš„ä½ç½®å’Œå°ºå¯¸ä¿¡æ¯ï¼Œè®©å‡½æ•°èƒ½å¤Ÿ**è‡ªåŠ¨è®¡ç®—**å‡ºæ­£ç¡®çš„å˜æ¢åŸç‚¹åæ ‡ã€‚

## å®Œæ•´ç¤ºä¾‹ï¼šelementBounds æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

### åŸºæœ¬ç”¨æ³•

```tsx
<svg viewBox="0 0 400 200">
  {/* ä¸€ä¸ªå›¾ç‰‡ï¼Œä½ç½®åœ¨ (100, 50)ï¼Œå°ºå¯¸ 80x80 */}
  <image x="100" y="50" width="80" height="80" href="pic.png">
    {genAnimateScale({
      origin: 'center',
      elementBounds: { x: 100, y: 50, w: 80, h: 80 },  // â† æ³¨æ„è¿™é‡Œçš„å€¼
      timeline: [
        { durationSeconds: 1, toValue: 1.5 },
        { durationSeconds: 1, toValue: 1 }
      ],
      loopCount: 0
    })}
  </image>
</svg>
```

### elementBounds è®¡ç®—è¿‡ç¨‹

```javascript
// 1. æ ¹æ® elementBounds å’Œ origin: 'center' è®¡ç®—ä¸­å¿ƒç‚¹
centerX = x + w/2 = 100 + 80/2 = 140
centerY = y + h/2 = 50 + 80/2 = 90

// 2. ç”Ÿæˆä¸‰ä¸ª animateTransform çš„ values å€¼
// ç¬¬ä¸€ä¸ªï¼šå¹³ç§»åˆ°ä¸­å¿ƒ
values="140 90;140 90;140 90"

// ç¬¬äºŒä¸ªï¼šç¼©æ”¾
values="1 1;1.5 1.5;1 1"

// ç¬¬ä¸‰ä¸ªï¼šå¹³ç§»å›å»
values="-140 -90;-140 -90;-140 -90"
```

### å¯è§†åŒ–è¯´æ˜

```
SVG åæ ‡ç³»ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (0,0)                                   â”‚
â”‚                                         â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚         â”‚             â”‚                 â”‚
â”‚         â”‚   å›¾ç‰‡      â”‚  80x80          â”‚
â”‚         â”‚   ä¸­å¿ƒç‚¹     â”‚                 â”‚
â”‚         â”‚    â—        â”‚                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚       â†‘(100,50)                         â”‚
â”‚                                         â”‚
â”‚       ä¸­å¿ƒç‚¹åæ ‡ï¼š(140, 90)              â”‚
â”‚       = (100 + 40, 50 + 40)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®ç‚¹ï¼šelementBounds å¿…é¡»åŒ¹é…å…ƒç´ çš„å®é™…ä½ç½®

```tsx
// âœ… æ­£ç¡®ï¼šelementBounds å’Œ image çš„ x,y,w,h å®Œå…¨ä¸€è‡´
<image x="100" y="50" width="80" height="80">
  {genAnimateScale({
    elementBounds: { x: 100, y: 50, w: 80, h: 80 }  // åŒ¹é…ï¼
  })}
</image>

// âŒ é”™è¯¯ï¼šelementBounds ä¸åŒ¹é…
<image x="100" y="50" width="80" height="80">
  {genAnimateScale({
    elementBounds: { x: 0, y: 0, w: 80, h: 80 }  // ä¸åŒ¹é…ï¼ç¼©æ”¾ä¸­å¿ƒä¼šé”™
  })}
</image>
```

### ä¸åŒ origin çš„æ•ˆæœå¯¹æ¯”

åŒæ ·çš„ `elementBounds: { x: 100, y: 50, w: 80, h: 80 }`ï¼Œä¸åŒçš„ `origin` ä¼šäº§ç”Ÿä¸åŒçš„æ•ˆæœï¼š

```tsx
// origin: 'center' â†’ ç¼©æ”¾ä¸­å¿ƒ (140, 90)
// å…ƒç´ ä»è‡ªå·±çš„ä¸­å¿ƒæ”¾å¤§ç¼©å°

// origin: 'topLeft' â†’ ç¼©æ”¾ä¸­å¿ƒ (100, 50)
// å…ƒç´ ä»å·¦ä¸Šè§’æ”¾å¤§ï¼Œå‘å³ä¸‹è§’æ‰©æ•£

// origin: 'bottomRight' â†’ ç¼©æ”¾ä¸­å¿ƒ (180, 130)
// å…ƒç´ ä»å³ä¸‹è§’æ”¾å¤§ï¼Œå‘å·¦ä¸Šè§’æ‰©æ•£
```

## æ”¯æŒçš„å¿«æ·ä½ç½®ï¼ˆOriginPositionï¼‰

`getOriginNumByText` å‡½æ•°æ”¯æŒ 10 ç§å¿«æ·ä½ç½®ï¼š

å‡è®¾å…ƒç´ ä½ç½®ä¸º `x: 50, y: 70`ï¼Œå°ºå¯¸ä¸º `w: 80, h: 60`ï¼š

| ä½ç½®åç§° | è®¡ç®—å…¬å¼ | ç¤ºä¾‹ç»“æœ |
|----------|----------|----------|
| topLeft | [x, y] | [50, 70] |
| topCenter | [x + w/2, y] | [90, 70] |
| topRight | [x + w, y] | [130, 70] |
| centerLeft | [x, y + h/2] | [50, 100] |
| **center** | [x + w/2, y + h/2] | **[90, 100]** |
| centerRight | [x + w, y + h/2] | [130, 100] |
| bottomLeft | [x, y + h] | [50, 130] |
| bottomCenter | [x + w/2, y + h] | [90, 130] |
| bottomRight | [x + w, y + h] | [130, 130] |
| origin | [0, 0] | [0, 0] |

## ä½¿ç”¨ç¤ºä¾‹

### æ—‹è½¬åŠ¨ç”» - ä¸åŒåŸç‚¹çš„æ•ˆæœ

#### origin: 'center' ç»•ä¸­å¿ƒæ—‹è½¬

```typescript
genAnimateRotate({
  origin: 'center',
  elementBounds: { x: 157, y: 30, w: 60, h: 60 },
  timeline: [{ durationSeconds: 3, toValue: 360 }],
  loopCount: 0
})
```

#### origin: 'topLeft' ç»•å·¦ä¸Šè§’æ—‹è½¬

```typescript
genAnimateRotate({
  origin: 'topLeft',
  elementBounds: { x: 60, y: 20, w: 60, h: 60 },
  timeline: [{ durationSeconds: 3, toValue: 360 }],
  loopCount: 0
})
```

#### origin: 'bottomCenter' ç»•åº•éƒ¨ä¸­å¿ƒæ—‹è½¬ï¼ˆé’Ÿæ‘†æ•ˆæœï¼‰

```typescript
genAnimateRotate({
  initAngle: -30,
  origin: 'bottomCenter',
  elementBounds: { x: 157, y: 20, w: 60, h: 60 },
  timeline: [
    { durationSeconds: 1.5, toValue: 30 },
    { durationSeconds: 1.5, toValue: -30 }
  ],
  loopCount: 0
})
```

### ç¼©æ”¾åŠ¨ç”» - ä¸åŒåŸç‚¹çš„æ•ˆæœ

#### origin: 'center' ä»ä¸­å¿ƒç¼©æ”¾

```typescript
genAnimateScale({
  origin: 'center',
  elementBounds: { x: 157, y: 30, w: 60, h: 60 },
  timeline: [
    { durationSeconds: 1, toValue: 1.3 },
    { durationSeconds: 1, toValue: 1 }
  ],
  loopCount: 0
})
```

#### origin: 'topLeft' ä»å·¦ä¸Šè§’ç¼©æ”¾

```typescript
genAnimateScale({
  origin: 'topLeft',
  elementBounds: { x: 60, y: 20, w: 60, h: 60 },
  timeline: [
    { durationSeconds: 1, toValue: 1.5 },
    { durationSeconds: 1, toValue: 1 }
  ],
  loopCount: 0
})
```

#### origin: 'bottomRight' ä»å³ä¸‹è§’ç¼©æ”¾

```typescript
genAnimateScale({
  origin: 'bottomRight',
  elementBounds: { x: 240, y: 20, w: 60, h: 60 },
  timeline: [
    { durationSeconds: 1, toValue: 1.5 },
    { durationSeconds: 1, toValue: 1 }
  ],
  loopCount: 0
})
```

## CSS è¾…åŠ©å‡½æ•°ï¼šå¿«é€Ÿå®ç°ä¸­å¿ƒå˜æ¢

å¦‚æœä½ **åªéœ€è¦ä¸­å¿ƒç‚¹å˜æ¢**ï¼Œä¸”ä¸æƒ³æ‰‹åŠ¨æä¾› `elementBounds`ï¼Œå¯ä»¥ä½¿ç”¨ CSS è¾…åŠ©å‡½æ•°ï¼š

- ğŸ’¡ `getCenterRotateStyle()` - æ—‹è½¬ä¸­å¿ƒä¸ºå…ƒç´ ä¸­å¿ƒ
- ğŸ’¡ `getCenterScaleStyle()` - ç¼©æ”¾ä¸­å¿ƒä¸ºå…ƒç´ ä¸­å¿ƒ

è¿™ä¸¤ä¸ªå‡½æ•°é€šè¿‡ CSS çš„ `transform-origin` å’Œ `transform-box` å®ç°ä¸­å¿ƒå˜æ¢ã€‚

### getCenterRotateStyle() ä¸­å¿ƒæ—‹è½¬

ä½¿ç”¨ CSS æ–¹å¼å®ç°ä¸­å¿ƒæ—‹è½¬ï¼Œæ— éœ€æ‰‹åŠ¨è®¡ç®—åæ ‡ã€‚

**å‡½æ•°è¿”å›å€¼ï¼š**

```typescript
{
  transformOrigin: 'center',
  transformBox: 'fill-box'
}
```

- `transformOrigin: 'center'` - è®¾ç½®å˜æ¢åŸç‚¹ä¸ºå…ƒç´ ä¸­å¿ƒ
- `transformBox: 'fill-box'` - è®©åŸç‚¹è®¡ç®—åŸºäºå…ƒç´ çš„å¡«å……è¾¹ç•Œï¼ˆè€Œä¸æ˜¯è§†å£ï¼‰

```typescript
// âœ… ç®€æ´æ–¹å¼ï¼šä½¿ç”¨ CSS è¾…åŠ©å‡½æ•°
<g style={getCenterRotateStyle()}>
  <image href={pic1} x={157} y={30} width={60} height={60}>
    {genAnimateRotate({
      origin: 'center',  // ä¸éœ€è¦ elementBounds
      timeline: [{ durationSeconds: 3, toValue: 360 }],
      loopCount: 0
    })}
  </image>
</g>
```

### getCenterScaleStyle() ä¸­å¿ƒç¼©æ”¾

ä½¿ç”¨ CSS æ–¹å¼å®ç°ä¸­å¿ƒç¼©æ”¾ã€‚

ä¸ `getCenterRotateStyle()` è¿”å›å€¼ç›¸åŒï¼Œä¸¤è€…éƒ½æ˜¯é€šè¿‡ CSS è®¾ç½®å˜æ¢åŸç‚¹ä¸ºå…ƒç´ ä¸­å¿ƒã€‚

```typescript
// âœ… ç®€æ´æ–¹å¼ï¼šä½¿ç”¨ CSS è¾…åŠ©å‡½æ•°
<g style={getCenterScaleStyle()}>
  <image href={pic1} x={157} y={30} width={60} height={60}>
    {genAnimateScale({
      origin: 'center',  // ä¸éœ€è¦ elementBounds
      timeline: [
        { durationSeconds: 1, toValue: 1.3 },
        { durationSeconds: 1, toValue: 1 }
      ],
      loopCount: 0
    })}
  </image>
</g>
```

### CSS æ–¹å¼ vs ElementBounds æ–¹å¼

| å¯¹æ¯”é¡¹ | CSS æ–¹å¼<br/>`getCenterRotateStyle()` | ElementBounds æ–¹å¼<br/>`elementBounds + origin` |
|--------|--------------------------------------|------------------------------------------|
| ä»£ç ç®€æ´åº¦ | âœ… éå¸¸ç®€æ´ï¼Œä¸€è¡Œä»£ç  | âš ï¸ éœ€è¦æä¾›ä½ç½®å’Œå°ºå¯¸ä¿¡æ¯ |
| æ”¯æŒçš„åŸç‚¹ | âš ï¸ åªæ”¯æŒ `center` | âœ… æ”¯æŒ 10 ç§å¿«æ·ä½ç½® + è‡ªå®šä¹‰åæ ‡ |
| æŠ€æœ¯ä¾èµ– | âš ï¸ ä¾èµ– CSS æ”¯æŒ | âœ… çº¯ SVGï¼Œå…¼å®¹æ€§æ›´å¥½ |
| ç²¾ç¡®æ§åˆ¶ | âš ï¸ ç”±æµè§ˆå™¨è‡ªåŠ¨è®¡ç®— | âœ… å®Œå…¨ç²¾ç¡®æ§åˆ¶ |
| æ¨èåœºæ™¯ | å¿«é€ŸåŸå‹ã€ç®€å•ä¸­å¿ƒåŠ¨ç”» | ç”Ÿäº§ç¯å¢ƒã€å¤æ‚å˜æ¢ |

**é€‰æ‹©å»ºè®®ï¼š**
- å¿«é€Ÿå¼€å‘æˆ–åªéœ€è¦ä¸­å¿ƒç‚¹å˜æ¢ï¼šä½¿ç”¨ `getCenterRotateStyle()` æˆ– `getCenterScaleStyle()`
- éœ€è¦å…¶ä»–åŸç‚¹ï¼ˆå¦‚è§’è½ã€è¾¹ç¼˜ï¼‰æˆ–ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨ `elementBounds` æ–¹å¼

## å“ªäº›åŠ¨ç”»ä½¿ç”¨ ElementBoundsï¼Ÿ

- **æ—‹è½¬åŠ¨ç”»ï¼ˆgenAnimateRotateï¼‰** - æŒ‡å®šæ—‹è½¬ä¸­å¿ƒ
- **ç¼©æ”¾åŠ¨ç”»ï¼ˆgenAnimateScaleï¼‰** - æŒ‡å®šç¼©æ”¾ä¸­å¿ƒ
- æœªæ¥å¯èƒ½æ”¯æŒï¼šæ–œåˆ‡åŠ¨ç”»ï¼ˆgenAnimateSkewX/Yï¼‰

## ä¸‰ç§ä½¿ç”¨æ–¹å¼å¯¹æ¯”

| æ–¹å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| `origin: 'center'`<br/>+ `elementBounds` | âœ… çº¯ SVG å®ç°<br/>âœ… ç²¾ç¡®æ§åˆ¶<br/>âœ… æ”¯æŒ 9 ç§å¿«æ·ä½ç½® | âš ï¸ éœ€è¦æä¾›å°ºå¯¸ä¿¡æ¯ | **æ¨èä½¿ç”¨** |
| `origin: 'center'`<br/>+ `getCenterRotateStyle()` | âœ… ä»£ç ç®€æ´<br/>âœ… è‡ªé€‚åº”å…ƒç´ å¤§å° | âš ï¸ ä¾èµ– CSS<br/>âš ï¸ åªæ”¯æŒ center | å¿«é€ŸåŸå‹ |
| `origin: [x, y]` | âœ… å®Œå…¨è‡ªå®šä¹‰ | âš ï¸ éœ€æ‰‹åŠ¨è®¡ç®—åæ ‡ | ç‰¹æ®Šéœ€æ±‚ |
